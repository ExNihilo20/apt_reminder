2026-01-24 19:16:59,018 [INFO] app.main:19 - Application startup
2026-01-24 19:16:59,019 [INFO] app.main:20 - Connected to MongoDB database: reminder
2026-01-24 19:35:00,481 [INFO] app.main:22 - Application startup
2026-01-24 19:35:00,481 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:36:53,873 [INFO] app.main:22 - Application startup
2026-01-24 19:36:53,874 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:36:54,296 [INFO] app.main:22 - Application startup
2026-01-24 19:36:54,296 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:37:11,857 [INFO] app.main:22 - Application startup
2026-01-24 19:37:11,857 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:38:30,499 [INFO] app.main:22 - Application startup
2026-01-24 19:38:30,499 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:38:30,967 [INFO] app.main:22 - Application startup
2026-01-24 19:38:30,967 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:39:04,820 [INFO] app.main:22 - Application startup
2026-01-24 19:39:04,820 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:39:51,624 [INFO] app.main:22 - Application startup
2026-01-24 19:39:51,624 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:39:52,039 [INFO] app.main:22 - Application startup
2026-01-24 19:39:52,040 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:40:01,643 [INFO] app.main:22 - Application startup
2026-01-24 19:40:01,644 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:42:37,635 [INFO] app.main:22 - Application startup
2026-01-24 19:42:37,636 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:42:47,790 [INFO] app.main:22 - Application startup
2026-01-24 19:42:47,791 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:43:29,947 [INFO] app.main:22 - Application startup
2026-01-24 19:43:29,947 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:43:33,385 [INFO] app.main:22 - Application startup
2026-01-24 19:43:33,385 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:45:18,205 [INFO] app.main:22 - Application startup
2026-01-24 19:45:18,205 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:45:18,649 [INFO] app.main:22 - Application startup
2026-01-24 19:45:18,650 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:45:33,366 [INFO] app.main:22 - Application startup
2026-01-24 19:45:33,366 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:45:52,480 [INFO] app.main:22 - Application startup
2026-01-24 19:45:52,480 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:47:17,258 [INFO] app.main:22 - Application startup
2026-01-24 19:47:17,258 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-24 19:47:28,142 [INFO] api.request:29 - request_id=b2fc89ca-19fc-47d0-a8e8-92de9a07d4d1 method=GET path=/health status=200 duration_ms=2.26 client_ip=172.19.0.1
2026-01-24 19:52:51,214 [INFO] app.main:22 - Application startup
2026-01-24 19:52:51,214 [INFO] app.main:23 - Connected to MongoDB database: reminder
2026-01-30 21:40:45,514 [INFO] app.main:42 - Application startup
2026-01-30 21:40:45,514 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-01-30 21:41:10,319 [INFO] app.main:60 - Health check detailed status=ok mongo_status=up uptime=24.81s
2026-01-30 21:41:10,320 [INFO] api.request:29 - request_id=601bd536-d81b-4c36-b0b2-66f3d9095ee8 method=GET path=/health/detailed status=200 duration_ms=2.79 client_ip=172.19.0.1
2026-01-30 21:41:10,348 [INFO] api.request:29 - request_id=b7659d31-5f1e-42f8-abfe-63f9abe6d3e3 method=GET path=/favicon.ico status=404 duration_ms=0.32 client_ip=172.19.0.1
2026-01-30 21:41:38,246 [INFO] app.main:60 - Health check detailed status=ok mongo_status=up uptime=52.74s
2026-01-30 21:41:38,247 [INFO] api.request:29 - request_id=749bc068-c1f2-49e1-af2a-ea7705287f55 method=GET path=/health/detailed status=200 duration_ms=2.70 client_ip=172.19.0.1
2026-01-30 21:41:45,736 [INFO] app.main:60 - Health check detailed status=ok mongo_status=up uptime=60.23s
2026-01-30 21:41:45,737 [INFO] api.request:29 - request_id=e39c9875-55cb-4d01-87f0-b2a3e32d0057 method=GET path=/health/detailed status=200 duration_ms=2.31 client_ip=172.19.0.1
2026-01-30 21:41:57,192 [INFO] app.main:60 - Health check detailed status=ok mongo_status=up uptime=71.68s
2026-01-30 21:41:57,193 [INFO] api.request:29 - request_id=ab62fc14-4ea4-483d-820d-4c7699e9f05f method=GET path=/health/detailed status=200 duration_ms=2.48 client_ip=172.19.0.1
2026-01-30 21:42:41,786 [INFO] app.main:42 - Application startup
2026-01-30 21:42:41,787 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-01-30 21:42:55,725 [INFO] app.main:42 - Application startup
2026-01-30 21:42:55,725 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-01-30 21:42:57,022 [INFO] app.main:60 - Health check detailed status=ok mongo_status=up uptime=1.30s
2026-01-30 21:42:57,023 [INFO] api.request:29 - request_id=afa0efa4-af97-4682-b95f-3754fed39cb7 method=GET path=/health/detailed status=200 duration_ms=4.65 client_ip=172.19.0.1
2026-01-30 21:43:03,851 [INFO] app.main:60 - Health check detailed status=ok mongo_status=up uptime=8.13s
2026-01-30 21:43:03,852 [INFO] api.request:29 - request_id=61b436e7-52a8-42ec-b1d9-9e649afa65b4 method=GET path=/health/detailed status=200 duration_ms=3.62 client_ip=172.19.0.1
2026-01-30 21:43:28,416 [INFO] app.main:42 - Application startup
2026-01-30 21:43:28,416 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-01-30 21:43:28,835 [INFO] app.main:42 - Application startup
2026-01-30 21:43:28,835 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-01-30 21:43:31,351 [INFO] app.main:60 - Health check detailed status=ok mongo_status=up uptime=2.52s
2026-01-30 21:43:31,352 [INFO] api.request:29 - request_id=62c20a21-603f-4c7d-9f13-333cb476415a method=GET path=/health/detailed status=200 duration_ms=3.65 client_ip=172.19.0.1
2026-01-30 21:46:50,575 [INFO] app.main:42 - Application startup
2026-01-30 21:46:50,575 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-01-31 02:03:13,429 [INFO] app.main:47 - Application startup
2026-01-31 02:03:13,429 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-01-31 02:03:14,273 [INFO] app.main:47 - Application startup
2026-01-31 02:03:14,273 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-01-31 02:03:17,689 [INFO] app.main:47 - Application startup
2026-01-31 02:03:17,689 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-01-31 02:03:28,464 [INFO] app.main:47 - Application startup
2026-01-31 02:03:28,465 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-01-31 02:03:40,857 [INFO] app.main:65 - Health check detailed status=ok mongo_status=up uptime=12.45s
2026-01-31 02:03:40,859 [INFO] api.request:29 - request_id=b5356218-19be-4881-8dde-86a8a8937196 method=GET path=/health/detailed status=200 duration_ms=12.01 client_ip=172.19.0.1
2026-01-31 02:03:49,637 [INFO] app.main:83 - Creating contact firstname=John lastname=Doe phone=(207) 555-1234
2026-01-31 02:03:49,656 [INFO] api.request:29 - request_id=4d3d7652-f751-4067-942b-792571cb445d method=POST path=/contacts status=201 duration_ms=29.88 client_ip=172.19.0.1
2026-01-31 17:18:15,009 [INFO] app.main:65 - Health check detailed status=ok mongo_status=up uptime=54886.61s
2026-01-31 17:18:15,010 [INFO] api.request:29 - request_id=ee8d3477-ccd8-446a-9c6e-2cb9413d58f1 method=GET path=/health/detailed status=200 duration_ms=3.17 client_ip=172.19.0.1
2026-02-01 14:41:12,925 [INFO] app.main:47 - Application startup
2026-02-01 14:41:12,925 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:41:44,771 [INFO] app.main:47 - Application startup
2026-02-01 14:41:44,771 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:41:50,301 [INFO] app.main:47 - Application startup
2026-02-01 14:41:50,301 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:41:52,677 [INFO] app.main:47 - Application startup
2026-02-01 14:41:52,677 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:41:55,619 [INFO] app.main:47 - Application startup
2026-02-01 14:41:55,619 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:41:57,652 [INFO] app.main:47 - Application startup
2026-02-01 14:41:57,652 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:42:00,707 [INFO] app.main:47 - Application startup
2026-02-01 14:42:00,707 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:42:03,106 [INFO] app.main:47 - Application startup
2026-02-01 14:42:03,107 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:42:11,331 [INFO] app.main:47 - Application startup
2026-02-01 14:42:11,331 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:42:19,173 [INFO] app.main:47 - Application startup
2026-02-01 14:42:19,173 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:42:21,077 [INFO] app.main:47 - Application startup
2026-02-01 14:42:21,077 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:42:59,891 [INFO] app.main:47 - Application startup
2026-02-01 14:42:59,891 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:43:13,991 [INFO] app.main:47 - Application startup
2026-02-01 14:43:13,991 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:43:25,020 [INFO] app.main:47 - Application startup
2026-02-01 14:43:25,020 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:43:30,052 [INFO] app.main:47 - Application startup
2026-02-01 14:43:30,052 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:43:30,946 [INFO] app.main:48 - Application startup
2026-02-01 14:43:30,946 [INFO] app.main:49 - Connected to MongoDB database: reminder
2026-02-01 14:43:35,254 [INFO] app.main:47 - Application startup
2026-02-01 14:43:35,254 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:43:45,328 [INFO] app.main:47 - Application startup
2026-02-01 14:43:45,328 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:44:38,189 [INFO] app.main:47 - Application startup
2026-02-01 14:44:38,189 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:44:42,182 [INFO] app.main:47 - Application startup
2026-02-01 14:44:42,183 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:44:48,296 [INFO] app.main:47 - Application startup
2026-02-01 14:44:48,296 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:44:50,708 [INFO] app.main:47 - Application startup
2026-02-01 14:44:50,708 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:44:57,632 [INFO] app.main:47 - Application startup
2026-02-01 14:44:57,632 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:02,405 [INFO] app.main:47 - Application startup
2026-02-01 14:45:02,406 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:05,858 [INFO] app.main:47 - Application startup
2026-02-01 14:45:05,858 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:09,537 [INFO] app.main:47 - Application startup
2026-02-01 14:45:09,537 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:13,782 [INFO] app.main:47 - Application startup
2026-02-01 14:45:13,782 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:15,636 [INFO] app.main:47 - Application startup
2026-02-01 14:45:15,636 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:17,947 [INFO] app.main:47 - Application startup
2026-02-01 14:45:17,947 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:21,421 [INFO] app.main:47 - Application startup
2026-02-01 14:45:21,421 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:37,108 [INFO] app.main:47 - Application startup
2026-02-01 14:45:37,109 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:45:38,370 [INFO] app.main:47 - Application startup
2026-02-01 14:45:38,370 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:46:02,585 [INFO] app.main:47 - Application startup
2026-02-01 14:46:02,586 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:46:13,242 [INFO] api.request:29 - request_id=1fbc9aa3-950d-4d44-80dc-f8fccb8af38b method=GET path=/health/contacts status=404 duration_ms=0.45 client_ip=172.19.0.1
2026-02-01 14:46:25,577 [INFO] app.main:103 - Retrieving all contacts
2026-02-01 14:46:25,578 [ERROR] api.request:17 - request_id=34855e48-b907-4a59-909d-2e4d58a0c88f method=GET path=/contacts unhandled exception
Traceback (most recent call last):
  File "/app/app/middleware/request_logging.py", line 14, in request_logging_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/to_thread.py", line 63, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/main.py", line 105, in get_all_contacts
    contacts = contact_repo.get_all_contacts()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ContactRepository.get_all_contacts() missing 1 required positional argument: 'contact_data'
2026-02-01 14:46:25,585 [INFO] api.request:29 - request_id=34855e48-b907-4a59-909d-2e4d58a0c88f method=GET path=/contacts status=500 duration_ms=10.06 client_ip=172.19.0.1
2026-02-01 14:48:36,928 [INFO] app.main:47 - Application startup
2026-02-01 14:48:36,928 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:51:10,573 [INFO] app.main:47 - Application startup
2026-02-01 14:51:10,573 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:52:02,078 [INFO] app.main:47 - Application startup
2026-02-01 14:52:02,079 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:52:03,008 [INFO] app.main:47 - Application startup
2026-02-01 14:52:03,008 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:52:11,915 [INFO] app.main:47 - Application startup
2026-02-01 14:52:11,915 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:52:36,614 [INFO] app.main:47 - Application startup
2026-02-01 14:52:36,614 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 14:52:42,541 [INFO] app.main:103 - Retrieving all contacts
2026-02-01 14:52:42,583 [INFO] api.request:29 - request_id=f0c6bc3c-79a6-4cc6-b04a-529a0a7cf6f4 method=GET path=/contacts status=200 duration_ms=46.98 client_ip=172.19.0.1
2026-02-01 21:07:40,664 [INFO] app.main:47 - Application startup
2026-02-01 21:07:40,665 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 21:09:45,257 [INFO] api.request:29 - request_id=0c814270-ef8d-4ec0-8e7f-d447a050477e method=GET path=/contacts/lookup/(207)55-1234 status=404 duration_ms=0.46 client_ip=172.19.0.1
2026-02-01 21:09:56,292 [INFO] api.request:29 - request_id=463c7993-e5e8-4687-8a7c-afeb986da2e9 method=GET path=/contacts/lookup/(207)555-1234 status=404 duration_ms=0.37 client_ip=172.19.0.1
2026-02-01 21:10:34,460 [INFO] api.request:29 - request_id=1903e7e4-bba1-4e80-af01-7eabc2351beb method=GET path=/contacts/lookup/(207) 555-1234 status=404 duration_ms=0.30 client_ip=172.19.0.1
2026-02-01 21:11:01,326 [INFO] api.request:29 - request_id=b3914881-953f-4b3e-b0e3-d090457fc289 method=GET path=/contacts/lookup/(207) 555-1234 status=404 duration_ms=0.32 client_ip=172.19.0.1
2026-02-01 21:11:29,994 [INFO] api.request:29 - request_id=8cdc761e-579c-4d46-b703-dc758b565e22 method=GET path=/contacts/lookup/John status=404 duration_ms=0.47 client_ip=172.19.0.1
2026-02-01 21:11:36,046 [INFO] api.request:29 - request_id=68c683e7-c252-4698-a0bf-8787ae678d62 method=GET path=/contacts/lookup/Doe status=404 duration_ms=0.28 client_ip=172.19.0.1
2026-02-01 21:11:45,916 [INFO] api.request:29 - request_id=7a11c683-d52f-4531-8885-8c2f9087cd9b method=GET path=/contacts/lookup/Doe status=404 duration_ms=0.26 client_ip=172.19.0.1
2026-02-01 21:12:37,698 [INFO] app.main:114 - Lookup contact phone=(207)555-1234 firstname=None lastname=None
2026-02-01 21:12:37,699 [ERROR] api.request:17 - request_id=ee2ebf7f-a673-4fa0-bd2d-9984c6df843f method=GET path=/contacts/lookup unhandled exception
Traceback (most recent call last):
  File "/app/app/middleware/request_logging.py", line 14, in request_logging_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/to_thread.py", line 63, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/main.py", line 124, in lookup_contact
    contact = contact_repo.get_by_phone_number(normalized_phone)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/repositories/contact_repository.py", line 24, in get_by_phone_number
    return self.collection.find_ine(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/collection.py", line 428, in __call__
    raise TypeError(
TypeError: 'Collection' object is not callable. If you meant to call the 'find_ine' method on a 'Collection' object it is failing because no such method exists.
2026-02-01 21:12:37,706 [INFO] api.request:29 - request_id=ee2ebf7f-a673-4fa0-bd2d-9984c6df843f method=GET path=/contacts/lookup status=500 duration_ms=10.40 client_ip=172.19.0.1
2026-02-01 21:13:03,380 [INFO] api.request:29 - request_id=7863bf5a-4c25-4ecb-b7ff-28c6ce4f718a method=GET path=/contacts/lookup/:phone_number status=404 duration_ms=0.89 client_ip=172.19.0.1
2026-02-01 21:13:53,029 [INFO] app.main:47 - Application startup
2026-02-01 21:13:53,029 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 21:13:58,826 [INFO] app.main:47 - Application startup
2026-02-01 21:13:58,826 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 21:14:12,108 [INFO] app.main:47 - Application startup
2026-02-01 21:14:12,108 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 21:14:18,679 [INFO] api.request:29 - request_id=9835234a-b72a-49df-a5e9-dd138aee1588 method=GET path=/contacts/lookup/:phone_number status=404 duration_ms=0.31 client_ip=172.19.0.1
2026-02-01 21:14:35,031 [INFO] api.request:29 - request_id=58b43676-4af4-4241-b0ea-4c51802199dd method=GET path=/contacts/lookup/(207) 555-1234 status=404 duration_ms=0.49 client_ip=172.19.0.1
2026-02-01 21:14:42,344 [INFO] api.request:29 - request_id=198288d4-4cc7-4e69-b3ca-7ebde0545fec method=GET path=/contacts/lookup/(207)555-1234 status=404 duration_ms=0.31 client_ip=172.19.0.1
2026-02-01 21:17:02,596 [INFO] api.request:29 - request_id=5bcafe60-aa44-483a-b71c-3d7822dd9906 method=GET path=/contacts/lookup/ status=307 duration_ms=0.29 client_ip=172.19.0.1
2026-02-01 21:17:02,601 [INFO] app.main:114 - Lookup contact phone=(207)555-1234 firstname=None lastname=None
2026-02-01 21:17:02,613 [INFO] api.request:29 - request_id=31788357-3f3f-4e46-a973-beda4c527fff method=GET path=/contacts/lookup status=200 duration_ms=13.40 client_ip=172.19.0.1
2026-02-01 21:19:15,514 [INFO] app.main:47 - Application startup
2026-02-01 21:19:15,514 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 21:19:44,555 [INFO] app.main:47 - Application startup
2026-02-01 21:19:44,555 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 21:19:45,855 [INFO] app.main:47 - Application startup
2026-02-01 21:19:45,856 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-01 21:22:34,491 [INFO] app.main:47 - Application startup
2026-02-01 21:22:34,491 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:21:29,247 [INFO] app.main:47 - Application startup
2026-02-04 14:21:29,247 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:21:37,358 [INFO] app.main:47 - Application startup
2026-02-04 14:21:37,358 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:21:58,326 [INFO] app.main:47 - Application startup
2026-02-04 14:21:58,326 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:13,678 [INFO] app.main:47 - Application startup
2026-02-04 14:22:13,678 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:18,770 [INFO] app.main:47 - Application startup
2026-02-04 14:22:18,770 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:25,837 [INFO] app.main:47 - Application startup
2026-02-04 14:22:25,837 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:29,098 [INFO] app.main:47 - Application startup
2026-02-04 14:22:29,098 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:33,124 [INFO] app.main:47 - Application startup
2026-02-04 14:22:33,124 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:34,985 [INFO] app.main:47 - Application startup
2026-02-04 14:22:34,986 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:36,695 [INFO] app.main:47 - Application startup
2026-02-04 14:22:36,695 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:38,378 [INFO] app.main:47 - Application startup
2026-02-04 14:22:38,378 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:44,194 [INFO] app.main:47 - Application startup
2026-02-04 14:22:44,195 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:49,976 [INFO] app.main:47 - Application startup
2026-02-04 14:22:49,977 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:22:51,833 [INFO] app.main:47 - Application startup
2026-02-04 14:22:51,833 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:03,474 [INFO] app.main:47 - Application startup
2026-02-04 14:23:03,474 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:06,508 [INFO] app.main:47 - Application startup
2026-02-04 14:23:06,508 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:11,136 [INFO] app.main:47 - Application startup
2026-02-04 14:23:11,136 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:13,386 [INFO] app.main:47 - Application startup
2026-02-04 14:23:13,386 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:16,119 [INFO] app.main:47 - Application startup
2026-02-04 14:23:16,119 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:16,992 [INFO] app.main:47 - Application startup
2026-02-04 14:23:16,992 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:18,455 [INFO] app.main:47 - Application startup
2026-02-04 14:23:18,455 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:21,811 [INFO] app.main:47 - Application startup
2026-02-04 14:23:21,811 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:23,439 [INFO] app.main:47 - Application startup
2026-02-04 14:23:23,439 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:27,493 [INFO] app.main:47 - Application startup
2026-02-04 14:23:27,494 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:30,484 [INFO] app.main:47 - Application startup
2026-02-04 14:23:30,484 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:35,021 [INFO] app.main:47 - Application startup
2026-02-04 14:23:35,021 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:36,336 [INFO] app.main:47 - Application startup
2026-02-04 14:23:36,336 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:39,756 [INFO] app.main:47 - Application startup
2026-02-04 14:23:39,756 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:43,557 [INFO] app.main:47 - Application startup
2026-02-04 14:23:43,557 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:45,752 [INFO] app.main:47 - Application startup
2026-02-04 14:23:45,752 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 14:23:48,256 [INFO] app.main:47 - Application startup
2026-02-04 14:23:48,256 [INFO] app.main:48 - Connected to MongoDB database: reminder
2026-02-04 15:32:05,272 [INFO] app.main:36 - Application startup
2026-02-04 15:32:05,278 [INFO] app.main:41 - Connected to MongoDB database: appointment_reminder
2026-02-04 15:33:35,851 [INFO] app.main:36 - Application startup
2026-02-04 15:33:35,856 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:33:53,730 [INFO] app.main:36 - Application startup
2026-02-04 15:33:53,735 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:34:12,252 [INFO] api.request:29 - request_id=b14e7719-089d-4b88-b992-02436aac83d5 method=GET path=/contacts status=405 duration_ms=0.35 client_ip=172.19.0.1
2026-02-04 15:34:29,013 [INFO] api.request:29 - request_id=2ef6307a-f615-4017-9321-6358d91b3d4b method=GET path=/health status=200 duration_ms=1.77 client_ip=172.19.0.1
2026-02-04 15:34:35,919 [INFO] api.request:29 - request_id=85b93db2-80cd-46ae-8c3f-28a42925fb1e method=GET path=/healthdetailed status=404 duration_ms=0.46 client_ip=172.19.0.1
2026-02-04 15:34:52,764 [INFO] app.main:79 - Health check detailed status=ok mongo_status=up uptime=59.03s
2026-02-04 15:34:52,764 [INFO] api.request:29 - request_id=53077b16-7622-43a7-be33-d4af66a15103 method=GET path=/health/detailed status=200 duration_ms=3.21 client_ip=172.19.0.1
2026-02-04 15:36:17,527 [INFO] app.main:36 - Application startup
2026-02-04 15:36:17,531 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:36:55,932 [INFO] app.main:36 - Application startup
2026-02-04 15:36:55,936 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:37:13,982 [INFO] api.request:29 - request_id=e298c216-ddf0-4afa-ad33-ed3a2ac4bc3a method=GET path=/contacts status=405 duration_ms=0.29 client_ip=172.19.0.1
2026-02-04 15:38:32,076 [INFO] api.request:29 - request_id=b4bfefb8-181f-4ef7-bf13-e037db78f9a5 method=POST path=/contacts status=201 duration_ms=12.96 client_ip=172.19.0.1
2026-02-04 15:42:19,486 [INFO] app.main:36 - Application startup
2026-02-04 15:42:19,490 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:42:36,848 [INFO] app.main:36 - Application startup
2026-02-04 15:42:36,852 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:43:21,137 [INFO] app.main:36 - Application startup
2026-02-04 15:43:21,142 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:43:56,123 [INFO] api.request:29 - request_id=378a5e64-9b79-453d-8ea3-d33246f1e4ee method=GET path=/contacts status=200 duration_ms=9.53 client_ip=172.19.0.1
2026-02-04 15:47:21,981 [INFO] app.main:36 - Application startup
2026-02-04 15:47:21,986 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:47:25,590 [INFO] app.main:36 - Application startup
2026-02-04 15:47:25,594 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:47:31,948 [INFO] app.main:36 - Application startup
2026-02-04 15:47:31,952 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:47:47,134 [INFO] app.main:36 - Application startup
2026-02-04 15:47:47,139 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:47:48,883 [INFO] app.main:36 - Application startup
2026-02-04 15:47:48,888 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:47:50,325 [INFO] app.main:36 - Application startup
2026-02-04 15:47:50,330 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:48:26,157 [INFO] app.main:36 - Application startup
2026-02-04 15:48:26,161 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:48:38,309 [INFO] app.main:36 - Application startup
2026-02-04 15:48:38,313 [INFO] app.main:41 - Connected to MongoDB database: reminder
2026-02-04 15:48:57,428 [INFO] app.main:38 - Application startup
2026-02-04 15:48:57,432 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 15:49:30,612 [INFO] app.main:38 - Application startup
2026-02-04 15:49:30,647 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 15:49:30,647 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 15:49:50,817 [INFO] app.main:38 - Application startup
2026-02-04 15:49:50,824 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 15:49:50,824 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 15:50:12,818 [INFO] api.request:29 - request_id=3e89bf84-8a6c-4fb2-b98c-a78bf1160d01 method=GET path=/contacts status=200 duration_ms=8.44 client_ip=172.19.0.1
2026-02-04 15:53:24,887 [ERROR] api.request:17 - request_id=e59b18ed-19c2-4b5d-8d00-2728b57073c2 method=POST path=/contacts unhandled exception
Traceback (most recent call last):
  File "/app/app/middleware/request_logging.py", line 14, in request_logging_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/to_thread.py", line 63, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/routes/contacts.py", line 25, in create_contact
    created = repo.create_contact(contact_doc)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/repositories/contact_repository.py", line 10, in create_contact
    result = self.collection.insert_one(contact_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/collection.py", line 891, in insert_one
    self._insert_one(
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/collection.py", line 831, in _insert_one
    self._database.client._retryable_write(
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2083, in _retryable_write
    return self._retry_with_session(retryable, func, s, bulk, operation, operation_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 1968, in _retry_with_session
    return self._retry_internal(
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/_csot.py", line 125, in csot_wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2014, in _retry_internal
    ).run()
      ^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2763, in run
    return self._read() if self._is_read else self._write()
                                              ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2895, in _write
    return self._func(self._session, conn, self._retryable)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/collection.py", line 829, in _insert_command
    _check_write_command_response(result)
  File "/usr/local/lib/python3.12/site-packages/pymongo/helpers_shared.py", line 322, in _check_write_command_response
    _raise_last_write_error(write_errors)
  File "/usr/local/lib/python3.12/site-packages/pymongo/helpers_shared.py", line 292, in _raise_last_write_error
    raise DuplicateKeyError(error.get("errmsg"), 11000, error)
pymongo.errors.DuplicateKeyError: E11000 duplicate key error collection: reminder.contacts index: unique_phone_number dup key: { phone_number: "2071234567" }, full error: {'index': 0, 'code': 11000, 'errmsg': 'E11000 duplicate key error collection: reminder.contacts index: unique_phone_number dup key: { phone_number: "2071234567" }', 'keyPattern': {'phone_number': 1}, 'keyValue': {'phone_number': '2071234567'}}
2026-02-04 15:53:24,891 [INFO] api.request:29 - request_id=e59b18ed-19c2-4b5d-8d00-2728b57073c2 method=POST path=/contacts status=500 duration_ms=10.75 client_ip=172.19.0.1
2026-02-04 15:53:37,636 [ERROR] api.request:17 - request_id=ca21e17f-d185-48d5-9fed-596aacc79760 method=POST path=/contacts unhandled exception
Traceback (most recent call last):
  File "/app/app/middleware/request_logging.py", line 14, in request_logging_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/to_thread.py", line 63, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/routes/contacts.py", line 25, in create_contact
    created = repo.create_contact(contact_doc)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/repositories/contact_repository.py", line 10, in create_contact
    result = self.collection.insert_one(contact_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/collection.py", line 891, in insert_one
    self._insert_one(
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/collection.py", line 831, in _insert_one
    self._database.client._retryable_write(
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2083, in _retryable_write
    return self._retry_with_session(retryable, func, s, bulk, operation, operation_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 1968, in _retry_with_session
    return self._retry_internal(
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/_csot.py", line 125, in csot_wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2014, in _retry_internal
    ).run()
      ^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2763, in run
    return self._read() if self._is_read else self._write()
                                              ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py", line 2895, in _write
    return self._func(self._session, conn, self._retryable)  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pymongo/synchronous/collection.py", line 829, in _insert_command
    _check_write_command_response(result)
  File "/usr/local/lib/python3.12/site-packages/pymongo/helpers_shared.py", line 322, in _check_write_command_response
    _raise_last_write_error(write_errors)
  File "/usr/local/lib/python3.12/site-packages/pymongo/helpers_shared.py", line 292, in _raise_last_write_error
    raise DuplicateKeyError(error.get("errmsg"), 11000, error)
pymongo.errors.DuplicateKeyError: E11000 duplicate key error collection: reminder.contacts index: unique_phone_number dup key: { phone_number: "2071234567" }, full error: {'index': 0, 'code': 11000, 'errmsg': 'E11000 duplicate key error collection: reminder.contacts index: unique_phone_number dup key: { phone_number: "2071234567" }', 'keyPattern': {'phone_number': 1}, 'keyValue': {'phone_number': '2071234567'}}
2026-02-04 15:53:37,638 [INFO] api.request:29 - request_id=ca21e17f-d185-48d5-9fed-596aacc79760 method=POST path=/contacts status=500 duration_ms=3.91 client_ip=172.19.0.1
2026-02-04 15:55:46,706 [INFO] app.main:38 - Application startup
2026-02-04 15:55:46,712 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 15:55:46,712 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 15:55:47,204 [INFO] app.main:38 - Application startup
2026-02-04 15:55:47,210 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 15:55:47,210 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 15:56:04,238 [INFO] app.main:38 - Application startup
2026-02-04 15:56:04,245 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 15:56:04,245 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 15:56:22,350 [INFO] app.main:38 - Application startup
2026-02-04 15:56:22,357 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 15:56:22,357 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 15:57:49,711 [INFO] app.main:38 - Application startup
2026-02-04 15:57:49,717 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 15:57:49,717 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 16:01:42,273 [INFO] app.main:38 - Application startup
2026-02-04 16:01:42,283 [INFO] app.db.indexes:19 - Ensured unique index on contacts.phone_number
2026-02-04 16:01:42,283 [INFO] app.main:43 - Connected to MongoDB database: reminder
2026-02-04 16:01:54,678 [INFO] api.request:29 - request_id=6e655b45-a8b8-4e89-b4be-f6ad8a54438b method=POST path=/contacts status=409 duration_ms=9.82 client_ip=172.19.0.1
2026-02-04 16:02:01,896 [INFO] api.request:29 - request_id=7fd7711e-d7f5-4c4b-9c5f-c20e7b34d700 method=GET path=/contacts status=200 duration_ms=2.36 client_ip=172.19.0.1
